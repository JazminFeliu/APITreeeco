<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head th:replace="base :: head">
  <meta charset="UTF-8">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/simple-line-icons/2.4.1/css/simple-line-icons.min.css" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>

<header th:replace="base :: header"></header>

<h2>Todas las consultas</h2>
<!--<form class="formBuscar" id="formBuscar" method="GET" action="/consultas/buscar">-->
<!--  <div>Buscar por nombre o ID:</div><br />-->
<!--  <input type="search" placeholder="Buscar por nombre o ID" name="nombreORid">-->
<!--  <span id="edadValor"></span>-->
<!--  <select class="form-control" name="nombre">-->
<!--    <option value="0" text="Buscar por nombre" selected />-->
<!--    <option th:each="nombre : ${nombres}" th:value="${nombre}" th:text="${nombre}"></option>-->
<!--  </select>-->
<!--  <select class="form-control" name="apellido">-->
<!--    <option value="0" text="Buscar por apellido" selected />-->
<!--    <option th:each="apellido : ${apellidos}" th:value="${apellido}" th:text="${apellido}"></option>-->
<!--  </select>-->
<!--  <select class="form-control" name="email">-->
<!--    <option value="0" text="Buscar por email" selected />-->
<!--    <option th:each="email : ${emails}" th:value="${email}" th:text="${email}"></option>-->
<!--  </select>-->
<!--  <select class="form-control" name="telefono">-->
<!--    <option value="0" text="Buscar por telefono" selected />-->
<!--    <option th:each="telefono : ${telefonos}" th:value="${telefono}" th:text="${telefono}"></option>-->
<!--  </select>-->

<!--  <br /><br />-->
<!--  <a href="#" id="buscarBtn" class="boton azul">Buscar</a>-->
<!--  <a href="/nuevo" class="boton azul">Crear nueva consulta</a>-->
<!--  <a href="/consultas" class="boton azul">Ver todos</a>-->
<!--</form>-->
<br />
<div class="table-wrapper">
  <table class="fl-table">
    <thead>
    <tr>
      <th>ID consulta</th>
      <th>Nombre</th>
      <th>Apellido</th>
      <th>Email</th>
      <th>Telefono</th>
      <th>Mensaje</th>
      <th>Editar</th>
      <th>Borrar</th>
    </tr>
    </thead>
    <tbody>

<!--      <tr th:if="${consultas.isEmpty()}">-->
<!--        <td colspan="8"> No se encontraron las consultas </td>-->
<!--      </tr>-->
<!--    <tr th:each="consulta : ${consultas}">-->
<!--      <td th:id="'consulta'+${consulta.getConsulta_id()}"><span th:text="${consulta.getConsulta_id()}"> ID consulta </span></td>-->
<!--      <td><span th:text="${consulta.getNombre()}"> Nombre </span></td>-->
<!--      <td><span th:text="${consulta.getApellido()}"> Apellido </span></td>-->
<!--      <td><span th:text="${consulta.getEmail()}"> Email </span></td>-->
<!--      <td><span th:text="${consulta.getTelefono()}">Telefono</span> </td>-->
<!--      <td><span th:text="${consulta.getTexto()}"> Mensaje </span></td>-->
<!--      <td><a href="#" class="icono editar" th:id="${consulta.getConsulta_id()}"><i class="icon-pencil" title="Editar"></i></a></td>-->
<!--      <td><a href="#" class="icono borrar" th:id="${consulta.getConsulta_id()}"><i class="icon-trash" title="Borrar"></i></a></td>-->
<td ><span th:text="${id}"> ID consulta </span></td>
<td><span th:text="${nombre}"> Nombre </span></td>
<td><span th:text="${apellido}"> Apellido </span></td>
<td><span th:text="${email}"> Email </span></td>
<td><span th:text="${telefono}">Telefono</span> </td>
<td><span th:text="${texto}"> Mensaje </span></td>
<td><a href="#" class="icono editar" th:id="${id}"><i class="icon-pencil" title="Editar"></i></a></td>
<td><a href="#" class="icono borrar" th:id="${id}"><i class="icon-trash" title="Borrar"></i></a></td>
    </tr>
    <tbody>
  </table>
</div>
<footer th:replace="base :: footer"></footer>
</body>
<script>
  $(".editar").click(function(){
    $(location).attr('href','/consultas/editar/'+this.id);
  });


  $(".borrar").click(function(){
    var itemID = $(this).attr("id");
    $.ajax({
      url: '/consultas/borrar/'+itemID,
      type: 'DELETE',
      complete: function(data){
        $("#consulta"+itemID).parent().slideUp("slow");
      }
    });
  });





  $("#buscarEdad").on('input',function(){
    $("#edadValor").text("0 - "+$("#buscarEdad").val());
  });

  $("#buscarBtn").click(function(){
    $("#formBuscar").submit();
  });

</script>
</html>